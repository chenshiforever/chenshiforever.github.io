<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>
<body>
	 <canvas id="canvas" width="500" height="500" style="background:#000;">
	 </canvas>
  </body>
  <script type="text/javascript">
  	window.onload = function(){
  		var canvas= document.getElementById('canvas'),
  			context = canvas.getContext("2d"),
  			centerX = canvas.width/2,
  			centerY = canvas.height/2,
  			rad = Math.PI*2/100,   //1%的弧度数
  			speed = 0.1;
  		function text(str){
        console.log(str);
  			context.save();
  			context.strokeStyle = "red";
  			context.font = "40px Arial";
  			context.strokeText(str.toFixed(0)+"%",centerX-25,centerY+10);
  			//context.stroke();已经stroketext了，不需要在stroke
  			context.restore();
  			
  		}
  		function blueCircle(str){
  			context.save();
  			context.beginPath();
  			context.strokeStyle = "#aa3";
  			context.lineWidth = 5;
  			context.arc(centerX,centerY,100,-Math.PI/2,-Math.PI/2 + str*rad,false);
  			context.stroke();
  			context.closePath();
  			context.restore();
  				
  		}
  		function whiteCircle(){
  			context.save();
  			context.beginPath();
  			context.strokeStyle = "#fff";
  			context.lineWidth = 5;
  			context.arc(centerX,centerY,100,0,-Math.PI*2,false);
  			context.stroke();
  			context.closePath();
  			context.restore();
  				
  		}
  		(function drawFrame(){
  			window.requestAnimationFrame(drawFrame);
  			context.clearRect(0,0,canvas.width,canvas.height);
  			whiteCircle();
  			text(speed);
  			blueCircle(speed);
  			speed > 99.9 ? speed = 100 :speed += 1;
  		})()
  	}
  
  </script>
  </html>